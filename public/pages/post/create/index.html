<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Create Post</title>
    <script src="/js/js.cookie.js"></script>
    <script src="/js/jquery-3.2.1.js"></script>
    <script>
        $(function () {
            if (Cookies.get('auth')) {
                var request = {
                    'query': '',
                };
                $.get('/api/1.0/channel/search', request, function (data, status) {
                    $.each(data.channels, function (item) {
                        var name = data.channels[item].name;
                        $('#channelList').append($('<option/>').val(name).text(name));
                    });
                });
                $('#SubmitButton').click(function () {
                    var title = $('#TitleBox').val();
                    var auth = Cookies.get('auth');
                    var url = "/api/1.0/post/create?auth=" + auth;
                    var channel = $('#channelList :selected').val();
                    var data = {
                        'title': title,
                        'channel': channel
                    };

                    $.post(url, data, function (data, status) {
                        if (data.status == 'success')
                        {
                            alert("Post Created; Post ID: " + data.id);
                        }
                    });

                });

            }
            else {
                window.location = '/login?redirect=true';
            }
        });
    </script>
</head>
<body>
    <div>Title</div>
    <div><input type="text" id="TitleBox"/></div>
    <div>Body (Not Implemented)</div>
    <div><textarea></textarea></div>
    <div>Channel</div>
    <div><select id="channelList"/></div>
    <div><input type="button" id="SubmitButton" value="Submit" /></div>
</body>
</html>